<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yqrb.mapper.SessionMappingMapperCustom">

    <!-- 保留结果集映射（优化字段映射，接口注解可复用） -->
    <resultMap id="SessionMappingResultMap" type="com.yqrb.pojo.vo.SessionMappingVO">
        <id column="id" property="id"/>
        <result column="session_id" property="sessionId"/>
        <result column="app_id" property="appId"/>
        <result column="user_id" property="userId"/>
        <result column="service_staff_id" property="serviceStaffId"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

    <!-- 仅保留无注解的delete/update方法（无重复） -->
    <delete id="deleteBySessionId">
        DELETE FROM session_mapping WHERE session_id = #{sessionId}
    </delete>

    <update id="updateSessionMapping">
        UPDATE session_mapping
        SET service_staff_id = #{serviceStaffId},
            update_time = #{updateTime}
        WHERE session_id = #{sessionId}
    </update>

    <delete id="deleteByAppId">
        DELETE FROM session_mapping WHERE app_id = #{appId}
    </delete>

    <!-- 完全删除所有select标签（因为接口注解已定义，避免重复） -->
</mapper>